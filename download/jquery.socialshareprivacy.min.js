/* socialshareprivacy-community | License: https://github.com/webmaster128/socialshareprivacy-community */
(function(f){function g(j,h){var k=decodeURIComponent(j);if(k.length<=h){return j}var i=k.substring(0,h-1).lastIndexOf(" ");k=encodeURIComponent(k.substring(0,i))+"\u2026";return k}function a(i){var h=f('meta[name="'+i+'"]').attr("content");return h||""}function b(){var i=a("DC.title");var h=a("DC.creator");if(i.length>0&&h.length>0){i+=" - "+h}else{i=f("title").text()}return encodeURIComponent(i)}function e(){var i=document.location.href;var h=f("link[rel=canonical]").attr("href");if(h&&h.length>0){if(h.indexOf("http")<0){h=document.location.protocol+"//"+document.location.host+h}i=h}return i}function c(i,k,m,l,j){var h=new Date();h.setTime(h.getTime()+(m*24*60*60*1000));document.cookie=i+"="+k+"; expires="+h.toUTCString()+"; path="+l+"; domain="+j}function d(i,k,l,j){var h=new Date();h.setTime(h.getTime()-100);document.cookie=i+"="+k+"; expires="+h.toUTCString()+"; path="+l+"; domain="+j}f.fn.socialSharePrivacy=function(i){var j={services:{facebook:{status:"on",dummy_img:"socialshareprivacy/images/dummy_facebook.png",perma_option:"on",display_name:"Facebook",referrer_track:"",language:"de_DE",action:"recommend"},twitter:{status:"on",dummy_img:"socialshareprivacy/images/dummy_twitter.png",perma_option:"on",display_name:"Twitter",referrer_track:"",tweet_text:b,language:"en"},gplus:{status:"on",dummy_img:"socialshareprivacy/images/dummy_gplus.png",perma_option:"on",display_name:"Google+",referrer_track:"",language:"de"}},info_link:"http://www.heise.de/ct/artikel/2-Klicks-fuer-mehr-Datenschutz-1333879.html",cookie_path:"/",cookie_domain:document.location.host,cookie_expires:"365",css_path:"socialshareprivacy/socialshareprivacy.css",uri:e,language:"de"};var m={services:{facebook:{dummy_img:"socialshareprivacy/images/dummy_facebook.png",txt_info:"2 Klicks f&uuml;r mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie k&ouml;nnen Ihre Empfehlung an Facebook senden. Schon beim Aktivieren werden Daten an Dritte &uuml;bertragen &ndash; siehe <em>i</em>.",txt_fb_off:"nicht mit Facebook verbunden",txt_fb_on:"mit Facebook verbunden",language:"de_DE"},twitter:{txt_info:"2 Klicks f&uuml;r mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie k&ouml;nnen Ihre Empfehlung an Twitter senden. Schon beim Aktivieren werden Daten an Dritte &uuml;bertragen &ndash; siehe <em>i</em>.",txt_twitter_off:"nicht mit Twitter verbunden",txt_twitter_on:"mit Twitter verbunden",tweet_text:b,language:"en"},gplus:{txt_info:"2 Klicks f&uuml;r mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie k&ouml;nnen Ihre Empfehlung an Google+ senden. Schon beim Aktivieren werden Daten an Dritte &uuml;bertragen &ndash; siehe <em>i</em>.",txt_gplus_off:"nicht mit Google+ verbunden",txt_gplus_on:"mit Google+ verbunden",language:"de"}},info_link:"http://www.heise.de/ct/artikel/2-Klicks-fuer-mehr-Datenschutz-1333879.html",txt_help:"Wenn Sie diese Felder durch einen Klick aktivieren, werden Informationen an Facebook, Twitter oder Google in die USA &uuml;bertragen und unter Umst&auml;nden auch dort gespeichert. N&auml;heres erfahren Sie durch einen Klick auf das <em>i</em>.",settings_perma:"Dauerhaft aktivieren und Daten&uuml;ber&shy;tragung zustimmen:",};var o={services:{facebook:{dummy_img:"socialshareprivacy/images/dummy_facebook_en.png",txt_info:"2 clicks for more privacy: you need to click here to activate the button and send your recommendation to Facebook. An activated button will send information to third parties even without clicking it – see <em>i</em>.",txt_fb_off:"not connected to Facebook",txt_fb_on:"connected to Facebook",language:"en_US",action:"recommend"},twitter:{txt_info:"2 clicks for more privacy: you need to click here to activate the button and send your recommendation to Twitter. An activated button will send information to third parties even without clicking it – see <em>i</em>.",txt_twitter_off:"not connected to Twitter",txt_twitter_on:"connected to Twitter",tweet_text:b,language:"en"},gplus:{txt_info:"2 clicks for more privacy: you need to click here to activate the button and send your recommendation to Google+. An activated button will send information to third parties even without clicking it – see <em>i</em>.",txt_gplus_off:"not connected to Google+",txt_gplus_on:"connected to Google+",language:"en"}},info_link:"http://www.heise.de/ct/artikel/2-Klicks-fuer-mehr-Datenschutz-1333879.html",txt_help:"If you activate these buttons by clicking on them, information will get transfered to Facebook, Twitter or Google in the USA and potentially stored there. Find out more by clicking on the <em>i</em>.",settings_perma:"Permanently enable and agree to transfer information:",};if(i.language==="en"){var h=f.extend(true,j,o)}else{var h=f.extend(true,j,m)}var p=f.extend(true,j,i);var n=(p.services.facebook.status==="on");var k=(p.services.twitter.status==="on");var l=(p.services.gplus.status==="on");if(!n&&!k&&!l){return}if(p.css_path.length>0){if(document.createStyleSheet){document.createStyleSheet(p.css_path)}else{f("head").append('<link rel="stylesheet" type="text/css" href="'+p.css_path+'" />')}}return this.each(function(){f(this).prepend('<ul class="social_share_privacy_area"></ul>');var t=f(".social_share_privacy_area",this);var x=p.uri;if(typeof x==="function"){x=x(t)}if(n){var K=encodeURIComponent(x+p.services.facebook.referrer_track);var q='<iframe src="http://www.facebook.com/plugins/like.php?locale='+p.services.facebook.language+"&amp;href="+K+"&amp;send=false&amp;layout=button_count&amp;width=120&amp;show_faces=false&amp;action="+p.services.facebook.action+'&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:145px; height:21px;" allowTransparency="true"></iframe>';var P='<img src="'+p.services.facebook.dummy_img+'" alt="Facebook &quot;Like&quot;-Dummy" class="fb_like_privacy_dummy" />';t.append('<li class="facebook help_info"><span class="info">'+p.services.facebook.txt_info+'</span><span class="switch off">'+p.services.facebook.txt_fb_off+'</span><div class="fb_like dummy_btn">'+P+"</div></li>");var s=f("li.facebook",t);t.on("click","li.facebook div.fb_like img.fb_like_privacy_dummy,li.facebook span.switch",function(){if(s.find("span.switch").hasClass("off")){s.addClass("info_off");s.find("span.switch").addClass("on").removeClass("off").html(p.services.facebook.txt_fb_on);s.find("img.fb_like_privacy_dummy").replaceWith(q)}else{s.removeClass("info_off");s.find("span.switch").addClass("off").removeClass("on").html(p.services.facebook.txt_fb_off);s.find(".fb_like").html(P)}})}if(k){var D=p.services.twitter.tweet_text;if(typeof D==="function"){D=D()}D=g(D,"120");var J=encodeURIComponent(x+p.services.twitter.referrer_track);var E=encodeURIComponent(x);var B='<iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+J+"&amp;counturl="+E+"&amp;text="+D+"&amp;count=horizontal&amp;lang="+p.services.twitter.language+'" style="width:130px; height:25px;"></iframe>';var F='<img src="'+p.services.twitter.dummy_img+'" alt="&quot;Tweet this&quot;-Dummy" class="tweet_this_dummy" />';t.append('<li class="twitter help_info"><span class="info">'+p.services.twitter.txt_info+'</span><span class="switch off">'+p.services.twitter.txt_twitter_off+'</span><div class="tweet dummy_btn">'+F+"</div></li>");var A=f("li.twitter",t);t.on("click","li.twitter div.tweet img,li.twitter span.switch",function(){if(A.find("span.switch").hasClass("off")){A.addClass("info_off");A.find("span.switch").addClass("on").removeClass("off").html(p.services.twitter.txt_twitter_on);A.find("img.tweet_this_dummy").replaceWith(B)}else{A.removeClass("info_off");A.find("span.switch").addClass("off").removeClass("on").html(p.services.twitter.txt_twitter_off);A.find(".tweet").html(F)}})}if(l){var w=x+p.services.gplus.referrer_track;var v='<div class="g-plusone" data-size="medium" data-href="'+w+'"></div><script type="text/javascript">window.___gcfg = {lang: "'+p.services.gplus.language+'"}; (function() { var po = document.createElement("script"); po.type = "text/javascript"; po.async = true; po.src = "https://apis.google.com/js/plusone.js"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s); })(); <\/script>';var O='<img src="'+p.services.gplus.dummy_img+'" alt="&quot;Google+1&quot;-Dummy" class="gplus_one_dummy" />';t.append('<li class="gplus help_info"><span class="info">'+p.services.gplus.txt_info+'</span><span class="switch off">'+p.services.gplus.txt_gplus_off+'</span><div class="gplusone dummy_btn">'+O+"</div></li>");var G=f("li.gplus",t);t.on("click","li.gplus div.gplusone img,li.gplus span.switch",function(){if(G.find("span.switch").hasClass("off")){G.addClass("info_off");G.find("span.switch").addClass("on").removeClass("off").html(p.services.gplus.txt_gplus_on);G.find("img.gplus_one_dummy").replaceWith(v)}else{G.removeClass("info_off");G.find("span.switch").addClass("off").removeClass("on").html(p.services.gplus.txt_gplus_off);G.find(".gplusone").html(O)}})}t.append('<li class="settings_info"><div class="settings_info_menu off perma_option_off"><a href="'+p.info_link+'"><span class="help_info icon"><span class="info">'+p.txt_help+"</span></span></a></div></li>");t.on("mouseenter",".help_info:not(.info_off)",function(){var S=f(this);var T=window.setTimeout(function(){f(S).addClass("display")},500);f(this).data("timeout_id",T)});t.on("mouseleave",".help_info",function(){var S=f(this).data("timeout_id");window.clearTimeout(S);if(f(this).hasClass("display")){f(this).removeClass("display")}});var H=(p.services.facebook.perma_option==="on");var L=(p.services.twitter.perma_option==="on");var R=(p.services.gplus.perma_option==="on");if((n&&H)||(k&&L)||(l&&R)){var N=document.cookie.split(";");var u="{";var I=0;for(;I<N.length;I+=1){var M=N[I].split("=");u+='"'+f.trim(M[0])+'":"'+f.trim(M[1])+'"';if(I<N.length-1){u+=","}}u+="}";u=f.parseJSON(u);var y=f("li.settings_info",t);y.find(".settings_info_menu").removeClass("perma_option_off");y.find(".settings_info_menu").append('<span class="settings">Einstellungen</span><form><fieldset><legend>'+p.settings_perma+"</legend></fieldset></form>");var z=' checked="checked"';if(n&&H){var r=u.socialSharePrivacy_facebook==="perma_on"?z:"";y.find("form fieldset").append('<input type="checkbox" name="perma_status_facebook" id="perma_status_facebook"'+r+' /><label for="perma_status_facebook">'+p.services.facebook.display_name+"</label>")}if(k&&L){var Q=u.socialSharePrivacy_twitter==="perma_on"?z:"";y.find("form fieldset").append('<input type="checkbox" name="perma_status_twitter" id="perma_status_twitter"'+Q+' /><label for="perma_status_twitter">'+p.services.twitter.display_name+"</label>")}if(l&&R){var C=u.socialSharePrivacy_gplus==="perma_on"?z:"";y.find("form fieldset").append('<input type="checkbox" name="perma_status_gplus" id="perma_status_gplus"'+C+' /><label for="perma_status_gplus">'+p.services.gplus.display_name+"</label>")}y.find("span.settings").css("cursor","pointer");y.on("mouseenter","span.settings",function(){var S=window.setTimeout(function(){y.find(".settings_info_menu").removeClass("off").addClass("on")},500);f(this).data("timeout_id",S)});y.on("mouseleave",function(){var S=f(this).data("timeout_id");window.clearTimeout(S);y.find(".settings_info_menu").removeClass("on").addClass("off")});y.on("click","fieldset input",function(U){var T=U.target.id;var S=T.substr(T.lastIndexOf("_")+1,T.length);var V="socialSharePrivacy_"+S;if(f("#"+U.target.id+":checked").length){c(V,"perma_on",p.cookie_expires,p.cookie_path,p.cookie_domain);f("form fieldset label[for="+T+"]",t).addClass("checked")}else{d(V,"perma_on",p.cookie_path,p.cookie_domain);f("form fieldset label[for="+T+"]",t).removeClass("checked")}});if(n&&H&&u.socialSharePrivacy_facebook==="perma_on"){f("li.facebook span.switch",t).click()}if(k&&L&&u.socialSharePrivacy_twitter==="perma_on"){f("li.twitter span.switch",t).click()}if(l&&R&&u.socialSharePrivacy_gplus==="perma_on"){f("li.gplus span.switch",t).click()}}})}}(jQuery));